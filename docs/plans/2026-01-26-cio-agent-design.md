# CIO Agent Design Specification

**Author:** CIO Agent Design
**Date:** 2026-01-26
**Status:** Design - Awaiting Implementation
**Version:** 1.0

---

## Executive Summary

The **CIO Agent** is a strategic decision-making agent that sits at the top of the HRP research workflow. It synthesizes outputs from all research agents (SignalScientist, AlphaResearcher, MLScientist, MLQualitySentinel, ValidationAnalyst) to make **CONTINUE/PIVOT/KILL** decisions on hypotheses and manage a **simulated paper trading portfolio**.

**Key Characteristics:**
- **Advisory Mode:** Presents recommendations via structured reports + MCP chat; user approves/rejects
- **Balanced Scoring:** Equal weight across statistical quality, risk profile, economic rationale, and cost realism
- **Hybrid Scheduling:** Weekly scheduled reviews + event-driven alerts for critical issues
- **Dual Scope:** Research prioritization + paper portfolio management

---

## Table of Contents

1. [Architecture and Positioning](#1-architecture-and-positioning)
2. [Input Data Sources](#2-input-data-sources)
3. [Decision Framework](#3-decision-framework)
4. [Paper Portfolio Management](#4-paper-portfolio-management)
5. [Output Format and Reporting](#5-output-format-and-reporting)
6. [Interaction Flow](#6-interaction-flow)
7. [Implementation Details](#7-implementation-details)

---

## 1. Architecture and Positioning

### Position in Agent Hierarchy

The CIO Agent sits at the top of the HRP research pipeline as the final decision-making authority before user action.

```
SignalScientist â†’ AlphaResearcher â†’ MLScientist â†’ MLQualitySentinel â†’ ValidationAnalyst
                                                                  â†“
                                                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                            â”‚   CIO Agent  â”‚ â—„â”€â”€â”€ User (approve/reject)
                                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                  â†“
                                                            Research Decisions
                                                            Paper Portfolio
```

### Two Primary Responsibilities

**1. Research Portfolio Management**

For hypotheses in `validated` status, recommend CONTINUE/PIVOT/KILL based on balanced scoring of:
- **Statistical metrics:** Walk-forward Sharpe â‰¥ 1.0, stability score, IC consistency
- **Risk metrics:** Max drawdown â‰¤ 20% research, volatility, regime stability
- **Economic rationale:** Market regime context, thesis strength, feature interpretability
- **Cost realism:** Slippage scenarios, turnover constraints, execution feasibility

**2. Paper Trading Portfolio**

Allocate hypothetical capital across validated strategies, set position limits, and recommend rebalancing. Establishes a "shadow portfolio" to track performance before live deployment.

### Agent Coordination

| Agent | Outputs Consumed by CIO |
|-------|------------------------|
| SignalScientist | Draft hypotheses, IC scores |
| AlphaResearcher | Rationale refinement, economic context |
| MLScientist | Walk-forward validation results, stability scores |
| MLQualitySentinel | Quality audits, overfitting alerts |
| ValidationAnalyst | Pre-deployment stress test results |

**The CIO reads from lineage events, hypothesis records, MLflow experiments, and reports. It writes decision reports and sends email notifications. It does NOT modify database state directlyâ€”all decisions flow through the user for approval.**

---

## 2. Input Data Sources

### Database Queries

| Table | Purpose | Key Fields |
|-------|---------|------------|
| `hypotheses` | Status, thesis, falsification criteria | `status`, `thesis`, `falsification`, `created_at`, `actor` |
| `lineage` | Audit trail of all agent actions | `event_type`, `hypothesis_id`, `experiment_id`, `details` |
| `experiments` | Walk-forward results, metrics | `run_id`, `metrics`, `config`, `created_at` |
| `hyperparameter_trials` | Experimentation history | `hypothesis_id`, `metric_value`, `hyperparameters` |

### File-Based Inputs

| Source | Location | Purpose |
|--------|----------|---------|
| Agent Reports | `docs/research/YYYY-MM-DD-*.md` | Qualitative analysis from all research agents |
| Feature Registry | `hrp/data/features/definitions.py` | Available features, definitions |
| Feature Stability | Generated by MLQualitySentinel | Feature decay, staleness alerts |
| MLflow Runs | `~/hrp-data/mlflow/` | Experiment tracking, model versions, parameters |

### Event Triggers

- `validation_passed` - ValidationAnalyst approved a hypothesis
- `validation_failed` - ValidationAnalyst rejected a hypothesis
- `experiment_run` - New MLflow experiment completed
- `quality_alert` - MLQualitySentinel detected critical issue
- `regime_change` - Market regime shifted (bull/bear/sideways)

### API Calls via PlatformAPI

```python
api.get_hypotheses(status=['validated', 'testing'])
api.get_experiments(hypothesis_id='HYP-2026-001')
api.get_lineage_events(event_types=['validation_passed', 'experiment_run'])
```

---

## 3. Decision Framework

### Scoring Dimensions (4 equal-weighted dimensions)

#### 1. Statistical Quality (25%)

| Metric | Threshold | Scoring |
|--------|-----------|---------|
| Walk-forward Sharpe | â‰¥ 1.0 target | Linear: 0.5â†’0, 1.0â†’0.5, 1.5â†’1.0 |
| Stability Score | â‰¤ 1.0 target | Linear: 2.0â†’0, 1.0â†’0.5, 0.5â†’1.0 |
| Mean IC | â‰¥ 0.03 target | Linear: 0.01â†’0, 0.03â†’0.5, 0.05â†’1.0 |
| Fold Stability (CV) | â‰¤ 2.0 | Linear: 3.0â†’0, 2.0â†’0.5, 1.0â†’1.0 |

#### 2. Risk Profile (25%)

| Metric | Threshold | Scoring |
|--------|-----------|---------|
| Max Drawdown | â‰¤ 20% research | Linear: 30%â†’0, 20%â†’0.5, 10%â†’1.0 |
| Volatility | â‰¤ 15% annual | Linear: 25%â†’0, 15%â†’0.5, 10%â†’1.0 |
| Regime Stability | â‰¥ 2/3 regimes profitable | Binary: 0 or 1 |
| Sharpe Decay | â‰¤ 50% trainâ†’test | Binary: 0 or 1 |

#### 3. Economic Rationale (25%)

| Factor | Assessment | Scoring |
|--------|------------|---------|
| Thesis Strength | AlphaResearcher rating | Weakâ†’0, Moderateâ†’0.5, Strongâ†’1.0 |
| Regime Alignment | Current market regime vs hypothesis | Mismatchâ†’0, Neutralâ†’0.5, Alignedâ†’1.0 |
| Feature Interpretability | Count of black-box features | >5â†’0, 3-5â†’0.5, <3â†’1.0 |
| Uniqueness | Distance from existing strategies | Duplicateâ†’0, Relatedâ†’0.5, Novelâ†’1.0 |

#### 4. Cost Realism (25%)

| Factor | Assessment | Scoring |
|--------|------------|---------|
| 2x Slippage Survival | Sharpe with 2x costs | Collapseâ†’0, Degradedâ†’0.5, Stableâ†’1.0 |
| Turnover | â‰¤ 50% annual | Linear: 100%â†’0, 50%â†’0.5, 20%â†’1.0 |
| Capacity Estimate | Max AUM before degradation | <$1Mâ†’0, $1-10Mâ†’0.5, >$10Mâ†’1.0 |
| Execution Complexity | Market impact, liquidity risk | Highâ†’0, Mediumâ†’0.5, Lowâ†’1.0 |

### Decision Logic

| Total Score | Decision | Rationale |
|-------------|----------|-----------|
| â‰¥ 0.75 | **CONTINUE** | Strong candidate; allocate to paper portfolio |
| 0.50 - 0.74 | **CONDITIONAL** | Address specific concerns; re-evaluate next cycle |
| < 0.50 | **KILL** | Insufficient quality; archive to model cemetery |
| Any critical failure | **PIVOT** | Fundamental flaw; redirect research effort |

### Critical Failures (Auto-PIVOT)

- Sharpe decay > 75%
- Target leakage detected (correlation > 0.95)
- Max drawdown > 35%
- Zero profitable regimes

### Default Decision Thresholds

| Threshold | Value |
|-----------|-------|
| Min Sharpe (research) | 1.0 |
| Max Drawdown (research) | 20% |
| Sharpe Decay Limit | 50% |
| Min IC | 0.03 |
| Max Turnover | 50% |
| Critical Sharpe Decay | 75% |
| Critical Target Leakage | 0.95 |
| Critical Max Drawdown | 35% |
| Min Profitable Regimes | 2 |

*Thresholds are adaptive and updated quarterly based on research performance.*

---

## 4. Paper Portfolio Management

### Portfolio Construction

**Capital Allocation (Equal-Risk Weighting):**

```python
position_weight = min(
    target_risk_contribution / position_volatility,
    max_weight_cap  # Default: 5% per position
)
```

| Parameter | Default | Rationale |
|-----------|---------|-----------|
| Portfolio Capital | $1,000,000 (hypothetical) | Standard unit for comparison |
| Max Positions | 20 | Diversification vs concentration |
| Max Weight per Position | 5% | Risk containment |
| Rebalance Frequency | Weekly | Balance responsiveness vs costs |
| Min Weight Threshold | 1% | Avoid dust positions |

### Portfolio Constraints

| Constraint | Limit | Purpose |
|------------|-------|---------|
| Gross Exposure | 100% (long-only) | Project scope |
| Sector Concentration | â‰¤ 30% single sector | Diversification |
| Turnover Limit | â‰¤ 50% annual | Cost realism |
| Max Drawdown Limit | 15% | Portfolio-level risk guard |

### Tracking & Reporting

**Database Tables:**

| Table | Purpose |
|-------|---------|
| `paper_portfolio` | Current allocations, entry prices, timestamps |
| `paper_portfolio_history` | Daily NAV, returns, positions snapshot |
| `paper_portfolio_trades` | Simulated trades with execution prices |

**Metrics Tracked:**
- Portfolio NAV, daily returns, cumulative return
- Sharpe, Sortino, Calmar vs SPY benchmark
- Rolling drawdown, volatility
- Turnover, slippage impact
- Attribution by strategy and sector

### Rebalancing Triggers

1. **Scheduled:** Weekly review (e.g., every Sunday)
2. **Drift:** Any position weight deviates > 20% from target
3. **New Strategy:** New CONTINUE decision adds a position
4. **Kill Event:** Strategy fails, capital redeployed
5. **Regime Shift:** Market regime change triggers rotation

---

## 5. Output Format and Reporting

### 1. Structured Decision Report

**Location:** `docs/reports/YYYY-MM-DD/HH-MM-cio-decision.md`

**Report Sections:**

```markdown
# CIO Decision Report
**Date:** 2026-01-26
**Reporting Period:** Week 04 (2026-01-20 to 2026-01-26)
**Agent:** CIOAgent (auto-generated)
**Status:** Awaiting Approval

## Executive Summary

| Metric | Value |
|--------|-------|
| Hypotheses Reviewed | 5 |
| CONTINUE | 2 |
| CONDITIONAL | 1 |
| KILL | 1 |
| PIVOT | 1 |
| Paper Portfolio NAV | $1,023,456 (+2.35%) |
| Portfolio Sharpe | 1.24 |

## Market Regime Context

Current: **Bull Market** (Volatility: Low, Trend: Up)
Regime Duration: 45 days
Recommended Bias: Momentum strategies favored

## Research Decisions

### CONTINUE: HYP-2026-001 (Momentum predicts returns)

**Final Score:** 0.82/1.0

| Dimension | Score | Details |
|-----------|-------|---------|
| Statistical | 0.85 | Sharpe: 1.42, Stability: 0.68, IC: 0.042 |
| Risk | 0.78 | MaxDD: 14.2%, Vol: 12.1%, 3/3 regimes profitable |
| Economic | 0.88 | Strong thesis, regime-aligned, interpretable features |
| Cost | 0.75 | Survives 2x slippage, turnover: 38% |

**Evidence:**
- MLflow Run: `abc123` (walk-forward, 5 folds)
- ValidationAnalyst: `docs/research/2026-01-25-validation-analyst.md`

**Paper Portfolio Action:** Allocate 4.2% of capital ($42,000)

### KILL: HYP-2026-003 (Mean reversion in volatility)

**Final Score:** 0.31/1.0
**Reason:** Insufficient statistical evidence, poor risk profile, misaligned with bull market regime.
**Action:** Archive to model_cemetery.csv

### PIVOT: HYP-2026-005 (RSI overbought/oversold)

**Critical Failure:** Target leakage detected (correlation: 0.97 with target)
**Redirect:** Investigate lagged RSI signals (t-1, t-2) to eliminate leakage.

## Paper Portfolio Status

### Current Composition
| Ticker | Weight | Entry Date | Unrealized P&L | Strategy |
|--------|--------|------------|----------------|----------|
| AAPL | 4.2% | 2026-01-15 | +3.2% | HYP-2026-001 |

### Performance Attribution (MTD)
| Strategy | Weight | Return | Attribution |
|----------|--------|--------|-------------|
| HYP-2026-001 | 42% | +3.8% | +1.60% |
| **Total** | 100% | **+2.35%** | |

### Risk Metrics
| Metric | Portfolio | Benchmark (SPY) |
|--------|-----------|-----------------|
| Sharpe (3mo) | 1.24 | 0.82 |
| Max Drawdown | -8.3% | -12.1% |

## Next 10 Actions

| Priority | Action | Assigned To | Deadline |
|----------|--------|-------------|----------|
| 1 | Approve/reject CONTINUE decisions | User | 2026-01-27 |
| 2 | Execute approved paper portfolio trades | CIO | Upon approval |
| 3 | Investigate lagged RSI for HYP-2026-005 | SignalScientist | 2026-01-28 |

## Appendix: Detailed Scores
[Full scoring breakdown for all hypotheses reviewed]
```

### 2. Email Notification

**Trigger:** After report generation (weekly) or critical alerts (event-driven)

**Template:**

```
Subject: CIO Decision Report - 2 CONTINUE, 1 KILL - Approval Required

Hello,

The CIO Agent has completed its weekly review and is awaiting your approval.

SUMMARY
- 2 strategies recommended for CONTINUE
- 1 strategy recommended for KILL
- 1 strategy requires PIVOT
- Paper portfolio: +2.35% this week (Sharpe: 1.24)

DECISIONS REQUIRING APPROVAL:
1. CONTINUE: HYP-2026-001 (Momentum) - Score: 0.82
2. CONTINUE: HYP-2026-004 (Value) - Score: 0.76

Full report: docs/reports/2026-01-26/09-00-cio-decision.md

To approve: Reply "APPROVE" or use MCP chat: cio.approve(decision_id="2026-01-26")
To review: Access via MCP or read the full report

Regards,
CIO Agent
HRP Platform
```

### 3. MCP Chat Interface

| Command | Purpose |
|---------|---------|
| `cio.review()` | Generate and display current decision report |
| `cio.approve(decision_id, hypotheses=[...])` | Approve specific CONTINUE decisions |
| `cio.reject(decision_id, hypotheses=[...])` | Reject decisions |
| `cio.pivot(decision_id, hypothesis, direction)` | Redirect research with new direction |
| `cio.portfolio()` | Show current paper portfolio state |
| `cio.explain(hypothesis)` | Get detailed scoring rationale |
| `cio.thresholds()` | View/adjust decision thresholds |
| `cio.summary()` | Quick executive summary |

---

## 6. Interaction Flow

### Weekly Review Flow

```
Scheduler â†’ CIO: Trigger weekly review (Sunday 8 PM)
CIO â†’ DB: Query validated hypotheses
CIO â†’ DB: Fetch experiments, lineage, reports
CIO â†’ CIO: Score each hypothesis (4 dimensions)
CIO â†’ CIO: Generate decisions (CONTINUE/PIVOT/KILL)
CIO â†’ CIO: Update paper portfolio recommendations
CIO â†’ CIO: Write markdown report
CIO â†’ Email: Send notification email
CIO â†’ User: Awaiting approval

User â†’ CIO: Approve/reject decisions
CIO â†’ DB: Update hypothesis statuses (if approved)
CIO â†’ DB: Execute paper portfolio trades (simulated)
CIO â†’ User: Confirmation + next actions
```

### Event-Driven Alert Flow

```
Agent â†’ Lineage: Log critical event
Lineage â†’ CIO: Event watcher notification

[Critical breach detected]
CIO â†’ CIO: Immediate risk assessment
CIO â†’ Email: Send alert (within 5 min)
CIO â†’ User: Immediate notification required

[Warning threshold]
CIO â†’ CIO: Add to weekly review queue
```

### MCP Interactive Session Example

```
User: cio.review()

CIO: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     CIO WEEKLY REVIEW - 2026-01-26
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

     5 hypotheses reviewed:
     âœ… HYP-2026-001 (Momentum)     Score: 0.82  CONTINUE
     âœ… HYP-2026-004 (Value)        Score: 0.76  CONTINUE
     âš ï¸  HYP-2026-002 (Trend)       Score: 0.62  CONDITIONAL
     âŒ HYP-2026-003 (MeanRev)      Score: 0.31  KILL
     ðŸ”„ HYP-2026-005 (RSI)          Critical    PIVOT

     Paper Portfolio: $1,023,456 (+2.35%)

     Full report: docs/reports/2026-01-26/09-00-cio-decision.md

     Ready to approve decisions?

User: cio.approve(decision_id="2026-01-26", hypotheses=["HYP-2026-001", "HYP-2026-004"])

CIO: âœ“ Approved 2 CONTINUE decisions

     Executing paper portfolio trades:
       + Adding HYP-2026-001: 4.2% allocation ($42,000)
       + Adding HYP-2026-004: 3.8% allocation ($38,000)

     Portfolio updated: 18 positions, $1,103,456 NAV
```

### State Persistence

| State | Location | Purpose |
|-------|----------|---------|
| Pending decisions | `cio_pending_decisions` table | Awaiting user approval |
| Decision history | `cio_decision_history` table | Audit trail of all decisions |
| Paper portfolio | `paper_portfolio` table | Current allocations |
| Threshold history | `cio_threshold_history` table | Adaptive threshold tracking |

---

## 7. Implementation Details

### Class Structure

```python
# hrp/agents/cio.py

@dataclass
class CIOScore:
    """Balanced score across 4 dimensions."""
    hypothesis_id: str
    statistical: float  # 0-1
    risk: float         # 0-1
    economic: float     # 0-1
    cost: float         # 0-1
    total: float        # 0-1, average of 4

    def get_decision(self) -> Literal["CONTINUE", "CONDITIONAL", "KILL", "PIVOT"]:
        if self.critical_failure:
            return "PIVOT"
        if self.total >= 0.75:
            return "CONTINUE"
        if self.total >= 0.50:
            return "CONDITIONAL"
        return "KILL"


@dataclass
class CIODecision:
    """Single decision for a hypothesis."""
    hypothesis_id: str
    decision: Literal["CONTINUE", "CONDITIONAL", "KILL", "PIVOT"]
    score: CIOScore
    rationale: str
    evidence: dict  # MLflow runs, reports, metrics
    paper_allocation: Optional[float] = None  # For CONTINUE decisions
    pivot_direction: Optional[str] = None  # For PIVOT decisions


@dataclass
class CIOReport:
    """Complete weekly CIO report."""
    report_date: date
    decisions: list[CIODecision]
    portfolio_state: dict
    market_regime: str
    next_actions: list[dict]
    report_path: str


class CIOAgent(SDKAgent):
    """
    Chief Investment Officer Agent.

    Makes strategic decisions about research lines and manages paper portfolio.
    Advisory mode: presents recommendations, awaits user approval.
    """

    agent_name = "cio"
    agent_version = "1.0.0"

    DEFAULT_THRESHOLDS = {
        "min_sharpe": 1.0,
        "max_drawdown": 0.20,
        "sharpe_decay_limit": 0.50,
        "min_ic": 0.03,
        "max_turnover": 0.50,
        "critical_sharpe_decay": 0.75,
        "critical_target_leakage": 0.95,
        "critical_max_drawdown": 0.35,
        "min_profitable_regimes": 2,
    }

    def __init__(
        self,
        api: Optional[PlatformAPI] = None,
        anthropic_client: Optional[anthropic.Anthropic] = None,
        thresholds: Optional[dict] = None,
    ):
        super().__init__(anthropic_client=anthropic_client)
        self.api = api or PlatformAPI()
        self.thresholds = {**self.DEFAULT_THRESHOLDS, **(thresholds or {})}

    def run_weekly_review(self) -> CIOReport:
        """Execute weekly CIO review."""
        # 1. Query validated hypotheses
        # 2. Fetch experiments, reports, lineage
        # 3. Score each hypothesis (4 dimensions)
        # 4. Generate decisions
        # 5. Update paper portfolio recommendations
        # 6. Write report
        # 7. Send email notification
        pass

    def approve_decisions(
        self,
        decision_id: str,
        hypotheses: list[str],
    ) -> dict:
        """User approves specific CONTINUE decisions."""
        pass

    # MCP-exposed methods
    def review(self) -> str:
        """Generate and display current decision report."""
        pass

    def approve(self, decision_id: str, hypotheses: list[str]) -> str:
        """Approve CONTINUE decisions."""
        pass

    def explain(self, hypothesis_id: str) -> str:
        """Explain scoring for a hypothesis."""
        pass

    def portfolio(self) -> str:
        """Show paper portfolio state."""
        pass

    def thresholds(self) -> str:
        """View decision thresholds."""
        pass
```

### MCP Server Integration

```python
# hrp/mcp/cio_server.py
from mcp.server import Server
from hrp.agents.cio import CIOAgent

app = Server("hrp-cio")
cio = CIOAgent()

@app.call_tool()
def cio_review() -> str:
    """Generate weekly CIO decision report."""
    return cio.review()

@app.call_tool()
def cio_approve(decision_id: str, hypotheses: list[str]) -> str:
    """Approve CONTINUE decisions."""
    return cio.approve(decision_id, hypotheses)

@app.call_tool()
def cio_explain(hypothesis_id: str) -> str:
    """Explain scoring for a hypothesis."""
    return cio.explain(hypothesis_id)

@app.call_tool()
def cio_portfolio() -> str:
    """Show paper portfolio state."""
    return cio.portfolio()

@app.call_tool()
def cio_thresholds() -> str:
    """View decision thresholds."""
    return cio.thresholds()
```

### Scheduler Integration

```python
# hrp/agents/scheduler.py - add to IngestionScheduler

def setup_weekly_cio_review(
    self,
    review_time: str = "20:00",  # Sunday 8 PM ET
    day_of_week: str = "sun",
):
    """Schedule weekly CIO review."""
    self.scheduler.add_job(
        self._run_cio_review,
        trigger=CronTrigger(day_of_week=day_of_week, hour=int(review_time[:2])),
        id="cio_weekly_review",
        name="CIO Weekly Review",
    )

def _run_cio_review(self):
    """Execute weekly CIO review job."""
    from hrp.agents.cio import CIOAgent

    cio = CIOAgent()
    report = cio.run_weekly_review()

    logger.info(f"CIO review complete: {len(report.decisions)} decisions")

# Add CLI flag: --with-cio-review
```

### Database Schema Additions

```sql
-- Paper portfolio tracking
CREATE TABLE IF NOT EXISTS paper_portfolio (
    id INTEGER PRIMARY KEY,
    hypothesis_id VARCHAR NOT NULL,
    weight DECIMAL(5, 4),  -- Position weight (0-1)
    entry_price DECIMAL(10, 4),
    entry_date DATE,
    current_price DECIMAL(10, 4),
    unrealized_pnl DECIMAL(10, 2),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(hypothesis_id)
);

CREATE TABLE IF NOT EXISTS paper_portfolio_history (
    id INTEGER PRIMARY KEY,
    as_of_date DATE,
    nav DECIMAL(12, 2),
    cash DECIMAL(12, 2),
    total_positions INTEGER,
    sharpe_ratio DECIMAL(5, 2),
    max_drawdown DECIMAL(5, 3),
    returns_daily DECIMAL(8, 5),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS paper_portfolio_trades (
    id INTEGER PRIMARY KEY,
    hypothesis_id VARCHAR,
    action VARCHAR,  -- 'ADD', 'REMOVE', 'REBALANCE'
    weight_before DECIMAL(5, 4),
    weight_after DECIMAL(5, 4),
    price DECIMAL(10, 4),
    executed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- CIO decision tracking
CREATE TABLE IF NOT EXISTS cio_decisions (
    id INTEGER PRIMARY KEY,
    decision_id VARCHAR UNIQUE,
    report_date DATE,
    hypothesis_id VARCHAR,
    decision VARCHAR,  -- CONTINUE, CONDITIONAL, KILL, PIVOT
    score_total DECIMAL(4, 2),
    score_statistical DECIMAL(4, 2),
    score_risk DECIMAL(4, 2),
    score_economic DECIMAL(4, 2),
    score_cost DECIMAL(4, 2),
    rationale TEXT,
    approved BOOLEAN DEFAULT FALSE,
    approved_by VARCHAR,
    approved_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Model cemetery (for killed strategies)
CREATE TABLE IF NOT EXISTS model_cemetery (
    id INTEGER PRIMARY KEY,
    hypothesis_id VARCHAR UNIQUE,
    killed_date DATE,
    reason TEXT,
    final_score DECIMAL(4, 2),
    experiment_count INTEGER,
    archived_by VARCHAR
);

-- Adaptive threshold tracking
CREATE TABLE IF NOT EXISTS cio_threshold_history (
    id INTEGER PRIMARY KEY,
    threshold_name VARCHAR,
    old_value DECIMAL(10, 4),
    new_value DECIMAL(10, 4),
    reason TEXT,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### Key Dependencies

| Dependency | Purpose |
|------------|---------|
| `hrp.api.platform.PlatformAPI` | Database access, hypothesis management |
| `hrp.agents.base.SDKAgent` | Base agent class with Claude SDK |
| `hrp.notifications.email` | Email notifications |
| `anthropic.Anthropic` | Claude API for economic rationale scoring |
| `apscheduler.schedulers.background.BackgroundScheduler` | Weekly scheduling |

---

## Implementation Checklist

- [ ] Create `hrp/agents/cio.py` with `CIOAgent` class
- [ ] Implement 4-dimension scoring functions
- [ ] Create decision logic (CONTINUE/CONDITIONAL/KILL/PIVOT)
- [ ] Implement paper portfolio management
- [ ] Create report generation (markdown + email)
- [ ] Add MCP server integration (`hrp/mcp/cio_server.py`)
- [ ] Add database schema migrations
- [ ] Add scheduler integration with CLI flag `--with-cio-review`
- [ ] Add event-driven alert integration
- [ ] Write unit tests for scoring functions
- [ ] Write integration tests for full workflow
- [ ] Update CLAUDE.md with CIO usage examples

---

## Appendix: Decision Threshold Adaptation

Thresholds are adaptive and updated quarterly based on research performance. The CIO tracks:

- **Promotion Rate:** % of validated hypotheses that reach paper portfolio
- **Paper Portfolio Sharpe:** Actual performance of approved strategies
- **False Positive Rate:** % of CONTINUE decisions that later degrade

If metrics indicate thresholds are too loose/tight, the CIO proposes adjustments with rationale.

---

**End of Specification**
