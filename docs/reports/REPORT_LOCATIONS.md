# Agent Report Locations

This document explains where each agent writes its reports and how to verify results.

## Report Directory Structure

```
docs/
├── reports/           # Daily/Weekly aggregated reports
│   ├── YYYY-MM-DD/    # Dated folders
│   │   ├── HH-MM-daily.md
│   │   └── HH-MM-weekly.md
│   └── README.md
├── research/          # Individual agent research notes
│   ├── YYYY-MM-DD-alpha-researcher.md
│   ├── YYYY-MM-DD-ml-quality-sentinel.md
│   ├── YYYY-MM-DD-ml-scientist.md
│   ├── YYYY-MM-DD-validation-analyst.md
│   ├── YYYY-MM-DD-risk-manager.md
│   └── ...
└── strategies/        # Generated strategy specifications
    ├── momentum_strategy.md
    ├── mean_reversion.md
    └── ...
```

## Agent Report Locations

### Report Generator (Daily/Weekly)

**Location:** `docs/reports/YYYY-MM-DD/HH-MM-{daily,weekly}.md`

**Generated by:** `ReportGenerator` agent

**Schedule:**
- Daily: 7:00 AM ET
- Weekly: Sunday 8:00 PM ET

**Contents:**
- Executive summary
- Hypothesis pipeline status
- Recent experiment results
- Top signals discovered
- Agent activity summary
- AI-powered insights

**Example:**
```bash
# View today's daily report
cat docs/reports/$(date +%Y-%m-%d)/*-daily.md

# View this week's reports
ls -la docs/reports/$(date +%Y-%m-%d)/
```

---

### Alpha Researcher

**Location:** `docs/research/YYYY-MM-DD-alpha-researcher.md`

**Generated by:** `AlphaResearcher` agent

**Schedule:** After Signal Scientist completes (weekly)

**Contents:**
- Hypotheses reviewed
- Promotions to testing
- Economic rationale analysis
- Novelty assessments
- Token usage/cost

**Example:**
```bash
# View latest Alpha Researcher report
ls -lt docs/research/*alpha-researcher.md | head -1
cat docs/research/$(date +%Y-%m-%d)-alpha-researcher.md
```

---

### ML Quality Sentinel

**Location:** `docs/research/YYYY-MM-DD-ml-quality-sentinel.md`

**Generated by:** `MLQualitySentinel` agent

**Schedule:** Daily 6:00 AM ET

**Contents:**
- Experiments audited
- Critical issues found
- Warnings issued
- Overfitting checks (Sharpe decay, target leakage, feature count)
- Stability analysis

**Example:**
```bash
# View latest quality audit
cat docs/research/$(date +%Y-%m-%d)-ml-quality-sentinel.md
```

---

### ML Scientist

**Location:** `docs/research/YYYY-MM-DD-ml-scientist.md`

**Generated by:** `MLScientist` agent

**Schedule:** After Alpha Researcher promotes hypotheses

**Contents:**
- Hypotheses tested
- Validations completed
- Walk-forward validation results
- Model performance metrics

---

### Validation Analyst

**Location:** `docs/research/YYYY-MM-DD-validation-analyst.md`

**Generated by:** `ValidationAnalyst` agent

**Schedule:** After Pipeline Orchestrator completes

**Contents:**
- Pre-deployment stress tests
- Parameter sensitivity analysis
- Time regime stability
- Execution cost analysis

---

### Risk Manager

**Location:** `docs/research/YYYY-MM-DD-risk-manager.md`

**Generated by:** `RiskManager` agent

**Schedule:** After Validation Analyst

**Contents:**
- Portfolio risk assessment
- Drawdown analysis
- Concentration checks
- Correlation limits
- Veto decisions

---

### Quant Developer

**Location:** `docs/research/YYYY-MM-DD-quant-developer.md` (if enabled)

**Generated by:** `QuantDeveloper` agent

**Schedule:** After ML Scientist validation

**Contents:**
- Backtest implementations
- Parameter variations tested
- Strategy performance

---

### Code Materializer

**Location:** `docs/strategies/`

**Generated by:** `CodeMaterializer` agent (part of Alpha Researcher)

**Schedule:** When Alpha Researcher generates strategies

**Contents:**
- Generated strategy specifications
- Implementation ready code
- Entry/exit rules

**Example:**
```bash
# View generated strategies
ls -la docs/strategies/
cat docs/strategies/momentum_continuation.md
```

---

## How to Verify Results

### 1. View Recent Reports

```bash
# List all reports by date
ls -lt docs/reports/

# View today's reports
ls -la docs/reports/$(date +%Y-%m-%d)/

# View latest research notes
ls -lt docs/research/ | head -10

# View generated strategies
ls -la docs/strategies/
```

### 2. Check Report Content

```bash
# Daily report summary
cat docs/reports/$(date +%Y-%m-%d)/*-daily.md | grep -A 5 "Summary"

# Weekly research summary
cat docs/reports/$(date +%Y-%m-%d)/*-weekly.md | grep -A 10 "Pipeline Status"

# Alpha Researcher findings
cat docs/research/*alpha-researcher.md | grep -A 10 "Promoted to testing"

# Quality audit results
cat docs/research/*ml-quality-sentinel.md | grep -A 10 "Critical Issues"
```

### 3. Run Report Generator Manually

```python
from hrp.agents import ReportGenerator

# Generate daily report
daily = ReportGenerator(report_type="daily")
result = daily.run()
print(f"Report: {result['report_path']}")

# Generate weekly report
weekly = ReportGenerator(report_type="weekly")
result = weekly.run()
print(f"Report: {result['report_path']}")
```

### 4. Query Report Metadata

```python
from hrp.api.platform import PlatformAPI
from datetime import date, timedelta

api = PlatformAPI()

# Get recent hypotheses (shows what agents have processed)
draft = api.list_hypotheses(status="draft", limit=10)
testing = api.list_hypotheses(status="testing", limit=10)
validated = api.list_hypotheses(status="validated", limit=10)

print(f"Draft: {len(draft)}, Testing: {len(testing)}, Validated: {len(validated)}")

# Get lineage events (shows agent activity)
from hrp.data.db import get_db

db = get_db()
events = db.fetchall("""
    SELECT event_type, actor, timestamp, details
    FROM lineage
    WHERE timestamp >= ?
    ORDER BY timestamp DESC
    LIMIT 20
""", ((date.today() - timedelta(days=7)).isoformat(),))

for event in events:
    print(f"{event[1]}: {event[0]} at {event[2]}")
```

### 5. Using Streamlit Dashboard

```bash
# Launch dashboard
streamlit run hrp/dashboard/app.py

# Navigate to:
# - Home page: Overview of agent activity
# - Hypotheses page: View pipeline status
# - Experiments page: Review MLflow results
# - Data Health: Verify data quality
```

---

## Report Verification Checklist

When reviewing agent outputs, verify:

- [ ] **Report exists** in expected location
- [ ] **Timestamp** is current (not stale)
- [ ] **Content is complete** (not truncated mid-write)
- [ ] **Token usage logged** (for AI agents)
- [ ] **No error markers** in report
- [ ] **Data consistency** (counts match across reports)

---

## Troubleshooting

### Missing Reports

**Problem:** Expected report not found

**Check:**
```bash
# 1. Verify agent ran recently
grep "agent:alpha-researcher" docs/research/*.md | tail -1

# 2. Check scheduler status
launchctl list | grep hrp

# 3. Check scheduler logs
tail -f ~/hrp-data/logs/scheduler.error.log

# 4. Verify directory exists
ls -la docs/research/
ls -la docs/reports/
```

### Empty Reports

**Problem:** Report file exists but is empty or incomplete

**Check:**
```bash
# 1. Check for write errors
tail -100 ~/hrp-data/logs/scheduler.error.log | grep "Failed to write"

# 2. Verify disk space
df -h

# 3. Check file permissions
ls -la docs/research/
```

### Stale Reports

**Problem:** Reports not updating

**Check:**
```bash
# 1. Verify scheduler is running
launchctl list | grep com.hrp.scheduler

# 2. Check recent agent activity
from hrp.data.db import get_db
db = get_db()
db.fetchall("SELECT actor, MAX(timestamp) FROM lineage GROUP BY actor")

# 3. Restart scheduler if needed
launchctl unload ~/Library/LaunchAgents/com.hrp.scheduler.plist
launchctl load ~/Library/LaunchAgents/com.hrp.scheduler.plist
```

---

## Quick Reference

| Agent | Report Location | Schedule | Key Metrics |
|-------|----------------|----------|-------------|
| **Report Generator** | `docs/reports/YYYY-MM-DD/HH-MM-{daily,weekly}.md` | Daily 7AM, Weekly 8PM | Pipeline summary |
| **Alpha Researcher** | `docs/research/YYYY-MM-DD-alpha-researcher.md` | Weekly (after Signal) | Hypotheses promoted |
| **ML Quality Sentinel** | `docs/research/YYYY-MM-DD-ml-quality-sentinel.md` | Daily 6AM | Critical issues |
| **ML Scientist** | `docs/research/YYYY-MM-DD-ml-scientist.md` | Weekly (after Alpha) | Validations |
| **Validation Analyst** | `docs/research/YYYY-MM-DD-validation-analyst.md` | After Pipeline | Stress tests |
| **Risk Manager** | `docs/research/YYYY-MM-DD-risk-manager.md` | After Validation | Risk vetoes |
| **Code Materializer** | `docs/strategies/*.md` | During Alpha | Strategy specs |
